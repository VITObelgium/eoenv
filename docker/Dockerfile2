FROM ubuntu:bionic

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get install -y sudo tzdata

# Create user
# user specific installation
RUN addgroup ubuntu
RUN adduser --disabled-password \
    --gecos "" \
    --shell /bin/bash \
    --home /home/ubuntu \
    --ingroup ubuntu \
    ubuntu

RUN adduser ubuntu sudo
RUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers

USER ubuntu

RUN sudo apt-get update
RUN sudo apt-get install -y wget gcc

WORKDIR /home/ubuntu

ADD ./environment.yml .
ADD ./install_conda.sh .
ADD ./user_aliases_conda.sh .

RUN bash install_conda.sh


